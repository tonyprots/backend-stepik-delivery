(function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1182:function(e,t,r){"use strict";var n=r("5188"),a=r.n(n);a.a},"1e31":function(e,t,r){e.exports=r.p+"img/loading.ddcb0b99.svg"},"2e6a":function(e,t,r){e.exports=r.p+"img/forward-blue.c47898e4.svg"},5088:function(e,t,r){e.exports=r.p+"img/remove.1919cb45.svg"},5188:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("navbar",{attrs:{show:e.showNavbar}}),r("b-container",[r("transition",{attrs:{name:"fade"}},[r("router-view")],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",[e.isMainPage?[e._v("\n      STEPIKDELIVERY\n    ")]:[n("div",{staticClass:"d-flex align-items-center"},[n("img",{attrs:{src:r("bdb17"),alt:"Go back",width:"15",height:"15"},on:{click:e.goBack}}),n("span",{staticClass:"ml-2"},[e._v(e._s(e.pageTitle))])])]],2),n("b-navbar-nav",{staticClass:"d-flex flex-row ml-auto"},[e.isMainPage?n("b-nav-item",{staticClass:"mr-3",attrs:{to:{name:"profile"}}},[n("img",{attrs:{src:r("95dc"),alt:"Go back",width:"20",height:"20"}})]):e._e(),e.isMainPage?n("b-nav-item",{attrs:{to:{name:"cart"}}},[n("img",{attrs:{src:r("daca"),alt:"Go back",width:"20",height:"20"}}),n("b-badge",{staticClass:"ml-1",attrs:{variant:"light"}},[e._v(e._s(e.orderMealsCount))])],1):e._e()],1)],1):e._e()},s=[],c=(r("7f7f"),r("cebc")),l=r("2f62"),u={name:"Navbar",props:{show:{type:Boolean,default:!0}},computed:Object(c["a"])({},Object(l["c"])(["orderMealsCount"]),{isMainPage:function(){return"home"===this.$route.name},pageTitle:function(){return this.$route.meta.title}}),methods:{goBack:function(){this.$router.go(-1)}}},d=u,p=r("2877"),m=Object(p["a"])(d,i,s,!1,null,"3267858a",null),f=m.exports,v={name:"App",components:{Navbar:f},computed:{showNavbar:function(){return this.$route.meta.navbar}}},b=v,h=(r("5c0b"),Object(p["a"])(b,a,o,!1,null,null,null)),g=h.exports,_=r("9f7b"),O=r.n(_),w={pluralize:function(e,t){return"".concat(t," ").concat(e[t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2])},install:function(e){e.filter("pluralize",this.pluralize),e.prototype.$pluralize=e.$pluralize=this.pluralize}},x=r("8c4f"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"vh-100"},[n("div",{staticClass:"w-100 d-flex flex-column align-items-center justify-content-center"},[n("img",{attrs:{src:r("1e31"),alt:"loading...",width:"156",height:"156"}}),n("strong",[e._v("Ммм... загрузка")])])])},k=[],j=(r("96cf"),r("3b8d")),P=r("bc3a"),C=r.n(P),E=function(){var e=C.a.create({baseURL:"".concat(localStorage.getItem("apiIp")),headers:{"Content-Type":"application/json"}});return e.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)}),e},M={checkAlive:function(){return E().get("alive")},setPromocode:function(e){return E().get("promocode/".concat(e))},sendOrder:function(e){return E().post("orders",e)},getProfile:function(){return E().get("profile")},updateProfile:function(e){return E().patch("profile",e)},getPromotion:function(){return E().get("promotion")},getActiveOrder:function(){return E().get("activeorder")},deleteActiveOrder:function(){return E().delete("activeorder")},getMeals:function(){return E().get("meals")},getOrders:function(){return E().get("orders")},getWorkHours:function(){return E().get("workhours")},getDeliveryTime:function(){return E().get("delivers")}},R={name:"Start",components:{},mounted:function(){this.checkAlive()},methods:{checkAlive:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.checkAlive();case 3:t=e.sent,setTimeout(function(){t?r.$router.push("home"):r.$router.push("sleep")},1e3),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$router.push("sleep");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()}},T=R,$=Object(p["a"])(T,y,k,!1,null,null,null),A=$.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("b-row",{staticClass:"mt-3"},[r("b-col",[r("home-card",{attrs:{promotion:e.promotion,promocode:e.promocode,workhours:e.workhours,activeOrder:e.activeOrder,deliveryTime:e.deliveryTime},on:{"promocode:set":e.setPromocode,"activeorder:delete":e.deleteActiveOrder}})],1)],1),r("b-row",{staticClass:"mt-3"},[r("b-col",[e.meals.length?[r("meals-list",{attrs:{counter:"",meals:e.meals,promocode:e.promocode},on:{"meal:add":e.addMeal,"meal:remove":e.removeMeal}})]:[r("strong",[e._v("Загружаем список блюд")])]],2)],1)],1)},S=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meals-list"},[e.counter?n("strong",[e._v("\n    "+e._s(e._f("pluralize")(["блюдо","блюда","блюд"],e.meals.length))+"\n    в каталоге")]):e._e(),e.totalPrice?n("strong",[e._v("\n    "+e._s(e._f("pluralize")(["товар","товара","товаров"],e.meals.length))+"\n    на сумму\n    "+e._s(e._f("pluralize")(["рубль","рубля","рублей"],e.totalPrice))+"\n  ")]):e._e(),n("ul",{staticClass:"list-unstyled mt-3"},e._l(e.meals,function(t){return n("b-media",{key:t.id,staticClass:"mb-4",attrs:{tag:"li"}},[t.picture?n("b-img",{attrs:{slot:"aside",src:t.picture,"blank-color":"#abc",height:"59",width:"59",rounded:"",alt:t.title},slot:"aside"}):e._e(),n("div",{staticClass:"d-flex align-items-center justify-content-between"},[n("div",{},[n("strong",{staticClass:"mt-0 mb-1"},[e._v(e._s(t.title))]),n("p",{staticClass:"mb-0"},[e._v("\n            "+e._s(e._f("pluralize")(["рубль","рубля","рублей"],t.price))+"\n          ")])]),n("div",[e.isOrdered(t.id)?e.isOrdered(t.id)?[n("img",{attrs:{src:r("5088"),alt:"Удалить",width:"18",height:"14"},on:{click:function(r){return e.$emit("meal:remove",t)}}})]:e._e():[n("img",{attrs:{src:r("76a4"),alt:"Добавить",width:"20",height:"20"},on:{click:function(r){return e.$emit("meal:add",t)}}})]],2)])],1)}),1)])},H=[],I=(r("7514"),r("c5f6"),{name:"MealsList",props:{meals:{type:Array,default:function(){return[]}},counter:{type:Boolean,default:!1},order:{type:Boolean,default:!1},totalPrice:{type:Number,default:0}},methods:{isOrdered:function(e){return!!this.orderMeals.find(function(t){return t.id===e})}},computed:Object(c["a"])({},Object(l["c"])(["orderMeals"]))}),L=I,q=Object(p["a"])(L,z,H,!1,null,"22b4e8a3",null),V=q.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.activeOrder?[r("b-alert",{attrs:{show:"",variant:"success"}},[r("div",{staticClass:"d-flex flex-column"},[r("div",[e._v("\n          Доставка в "),r("strong",[e._v(e._s(e.deliveryTime))])]),r("div",{staticClass:"mt-1"},[r("strong",[e._v("\n            "+e._s(e._f("pluralize")(["блюдо","блюда","блюд"],e.activeOrder.meals.length))+"\n          ")]),e._v("\n          на сумму\n          "),r("strong",[e._v("\n            "+e._s(e._f("pluralize")(["рубль","рубля","рублей"],e.activeOrder.summ))+"\n          ")])]),r("div",{staticClass:"mt-2 d-flex justify-content-between"},[r("b-badge",{staticClass:"px-2 d-flex align-items-center",attrs:{variant:"success"}},[e._v("\n            Идет доставка\n          ")]),r("b-button",{attrs:{size:"sm",variant:"dark"},on:{click:function(t){return e.$emit("activeorder:delete")}}},[e._v("Отменить")])],1)])])]:[r("b-card",{attrs:{"no-body":""}},[r("b-list-group",{attrs:{flush:""}},[r("b-list-group-item",[e.workhours?[e._v("\n            Сегодня доставляем с "+e._s(e.workhours.opens)+" до "+e._s(e.workhours.closes)+"\n          ")]:[e._v("\n            Загружаем время доставки\n          ")],e.deliveryTime?[e._v("\n            Привезем ваш заказ в "+e._s(e.deliveryTime)+"\n          ")]:e._e()],2),e.promotion?r("b-list-group-item",[e._v(e._s(e.promotion.title))]):e._e(),r("b-list-group-item",[e.promocode?[e._v("\n            Применен промокод\n            "),r("strong",[e._v(e._s(e.promocode.name))])]:[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Введите промокод"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),r("b-input-group-append",[r("b-button",{attrs:{size:"sm",text:"Button",variant:"success"},on:{click:function(t){return e.$emit("promocode:set",e.code)}}},[e._v("\n                  Применить\n                ")])],1)],1)]],2)],1)],1)]],2)},N=[],F={name:"HomeCard",props:{workhours:{type:Object,require:!0},promotion:{type:Object,require:!0},promocode:{type:Object,require:!0},deliveryTime:{type:String,require:!0},activeOrder:{type:Object,require:!0}},data:function(){return{code:null}}},G=F,W=Object(p["a"])(G,B,N,!1,null,"9023f2b2",null),J=W.exports,U={name:"Home",components:{MealsList:V,HomeCard:J},data:function(){return{promotion:null,code:null,meals:[],workhours:null,deliveryTime:null,activeOrder:null}},computed:Object(c["a"])({},Object(l["c"])(["promocode"])),mounted:function(){this.getPromotion(),this.getMeals(),this.getWorkHours(),this.getDeliveryTime(),this.getActiveOrder(),this.getProfile()},methods:Object(c["a"])({},Object(l["b"])(["getProfile"]),{setPromocode:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.setPromocode(t);case 3:r=e.sent,this.$store.commit("SET_PROMOCODE",{name:t,discount:r}),this.$bvToast.toast("Промокод успешно применен",{title:"Успех",solid:!0,variant:"success",toaster:"b-toaster-top-center",autoHideDelay:3e3,appendToast:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$bvToast.toast("Промокод не найден",{title:"Ошибка",solid:!0,variant:"danger",toaster:"b-toaster-top-center",autoHideDelay:3e3,appendToast:!1});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}(),getPromotion:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getPromotion();case 3:this.promotion=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.promotion=null;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}(),getMeals:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getMeals();case 3:this.meals=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.meals=null;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}(),getWorkHours:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getWorkHours();case 3:this.workhours=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.workhours=null;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}(),getActiveOrder:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getActiveOrder();case 3:this.activeOrder=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.activeOrder=null;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}(),deleteActiveOrder:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.deleteActiveOrder();case 3:this.$store.commit("SET_ORDER_ACTIVE",!1),this.getActiveOrder(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),getDeliveryTime:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M.getDeliveryTime();case 2:t=e.sent,r=new Date(1e3*t.time),this.deliveryTime="".concat(r.getHours(),":").concat(r.getMinutes());case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addMeal:function(e){this.$store.commit("ADD_MEAL",e)},removeMeal:function(e){this.$store.commit("REMOVE_MEAL",e)}})},K=U,Y=Object(p["a"])(K,D,S,!1,null,null,null),Q=Y.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",{staticClass:"mt-3"},[r("b-col",[e.isActiveOrder?[r("b-alert",{attrs:{variant:"success",show:""}},[e._v("Заказ отправлен, ждите 🙂")])]:e.orderMeals.length?[r("meals-list",{attrs:{order:"",meals:e.orderMeals,totalPrice:e.totalPrice},on:{"meal:remove":e.removeMeal}}),r("order-form",{on:{"order:send":e.sendOrder}})]:[r("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Корзина пуста")])],r("b-button",{attrs:{to:{name:"orders"},variant:"dark"}},[e._v("Показать историю заказов")])],2)],1)},Z=[],ee=(r("ac4d"),r("8a81"),r("ac6a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{staticClass:"mb-3",on:{submit:e.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Имя","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",disabled:""},model:{value:e.profile.name,callback:function(t){e.$set(e.profile,"name",t)},expression:"profile.name"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Телефон","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",disabled:""},model:{value:e.profile.phone,callback:function(t){e.$set(e.profile,"phone",t)},expression:"profile.phone"}})],1),r("b-form-group",{attrs:{id:"input-group-3",label:"Адрес","label-for":"input-3"}},[r("b-form-textarea",{attrs:{id:"input-3",disabled:""},model:{value:e.profile.address,callback:function(t){e.$set(e.profile,"address",t)},expression:"profile.address"}})],1),r("b-button",{attrs:{type:"submit",variant:"dark"}},[e._v("Отправить заказ")])],1)],1)}),te=[],re={name:"OrderForm",data:function(){return{orderForm:{name:"",phone:"",address:""}}},computed:Object(c["a"])({},Object(l["c"])(["profile"])),methods:{onSubmit:function(e){e.preventDefault(),this.$emit("order:send",this.orderForm)}}},ne=re,ae=Object(p["a"])(ne,ee,te,!1,null,"5bf4a24a",null),oe=ae.exports,ie={name:"Cart",components:{MealsList:V,OrderForm:oe},data:function(){return{promotion:null,meals:[]}},computed:Object(c["a"])({},Object(l["c"])(["orderMeals","promocode","isActiveOrder"]),{totalPrice:function(){var e=null;return this.orderMeals.forEach(function(t){return e+=t.price}),e}}),methods:{removeMeal:function(e){this.$store.commit("REMOVE_MEAL",e)},getTotalPrice:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var a,o=this.orderMeals[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;e+=i.price}}catch(s){r=!0,n=s}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},sendOrder:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.orderMeals.map(function(e){return e.id}),r={meals:t},this.promocode&&(r.promocode=this.promocode.name),e.next=6,M.sendOrder(r);case 6:this.$store.commit("SET_ORDER_ACTIVE",!0),this.$store.commit("RESET_CARD"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$bvToast.toast("Не удалось отправить заказ",{title:"Ошибка",solid:!0,variant:"danger",toaster:"b-toaster-top-center",autoHideDelay:3e3,appendToast:!1});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}()}},se=ie,ce=Object(p["a"])(se,X,Z,!1,null,null,null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",{staticClass:"mt-3"},[r("b-col",e._l(e.orders,function(t){return r("b-card",{key:t.id,staticClass:"mb-3"},[r("b-card-text",[r("div",{},[e._v("\n          "+e._s(new Date(1e3*t.ordered).toLocaleString("ru-RU"))+"\n        ")]),r("div",{},[r("strong",[e._v(e._s(e._f("pluralize")(["блюдо","блюда","блюд"],t.meals.length)))]),e._v("\n          на сумму\n          "),r("strong",[e._v(e._s(t.summ))]),e._v("\n          рублей\n        ")]),r("div",{staticClass:"mt-2"},["ACCEPTED"===t.status?[r("b-badge",{staticClass:"px-3 py-2",attrs:{pill:"",variant:"primary"}},[e._v("\n              Принят\n            ")])]:e._e(),"CANCELLED"===t.status?[r("b-badge",{staticClass:"px-3 py-2",attrs:{pill:"",variant:"danger"}},[e._v("\n              Отменен\n            ")])]:e._e(),"ACCEPTED"===t.status?r("div",{staticClass:"mt-2"},[r("b-button",{attrs:{size:"sm",variant:"dark"},on:{click:e.deleteActiveOrder}},[e._v("\n              Отменить заказ\n            ")])],1):e._e()],2)])],1)}),1)],1)},de=[],pe={name:"Orders",computed:Object(c["a"])({},Object(l["c"])(["orders"])),mounted:function(){this.getOrders()},methods:Object(c["a"])({},Object(l["b"])(["getOrders"]),{deleteActiveOrder:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.deleteActiveOrder();case 3:this.$store.commit("SET_ORDER_ACTIVE",!1),this.getOrders(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()})},me=pe,fe=Object(p["a"])(me,ue,de,!1,null,"59237870",null),ve=fe.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"mt-3"},[n("b-col",[e.orders?n("b-alert",{attrs:{variant:"primary",show:""}},[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"d-flex flex-column"},[n("div",[e._v("\n            История заказов\n          ")]),n("div",[n("strong",[e._v("\n              "+e._s(e._f("pluralize")(["заказ","заказа","заказов"],e.orders.length))+"\n            ")])])]),n("div",{staticClass:"d-flex align-items-center"},[n("img",{staticClass:"rotate-180",attrs:{src:r("2e6a"),alt:"Go back",width:"15",height:"15"},on:{click:e.goToOrdersHistory}})])])]):e._e(),e.newProfile?n("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveProfile(t)}}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Имя","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",required:"",placeholder:"Александр"},model:{value:e.newProfile.name,callback:function(t){e.$set(e.newProfile,"name",t)},expression:"newProfile.name"}})],1),n("b-form-group",{attrs:{id:"input-group-2",label:"Телефон","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",required:"",placeholder:"+79991233232"},model:{value:e.newProfile.phone,callback:function(t){e.$set(e.newProfile,"phone",t)},expression:"newProfile.phone"}})],1),n("b-form-group",{attrs:{id:"input-group-3",label:"Адрес","label-for":"input-3"}},[n("b-form-textarea",{attrs:{id:"input-3",required:"",rows:"3","max-rows":"6"},model:{value:e.newProfile.address,callback:function(t){e.$set(e.newProfile,"address",t)},expression:"newProfile.address"}})],1),n("b-button",{attrs:{type:"submit",variant:"dark"}},[e._v("Применить")])],1):e._e()],1)],1)},he=[],ge={name:"Profile",data:function(){return{newProfile:null}},computed:Object(c["a"])({},Object(l["c"])(["orders","profile"])),watch:{profile:function(){this.newProfile=Object(c["a"])({},this.profile)}},mounted:function(){this.getOrders(),this.getProfile()},methods:Object(c["a"])({},Object(l["b"])(["getOrders","getProfile"]),{saveProfile:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateProfile(this.newProfile);case 3:this.getProfile(),this.$bvToast.toast("Данные о пользователе обновлены",{title:"Успех",solid:!0,variant:"success",toaster:"b-toaster-top-center",autoHideDelay:3e3,appendToast:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$bvToast.toast("Данные о пользователе не обновлены",{title:"Ошибка",solid:!0,variant:"danger",toaster:"b-toaster-top-center",autoHideDelay:3e3,appendToast:!1});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),goToOrdersHistory:function(){this.$router.push({name:"orders"})}})},_e=ge,Oe=(r("1182"),Object(p["a"])(_e,be,he,!1,null,"694dab98",null)),we=Oe.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"vh-100"},[n("div",{staticClass:"w-100 d-flex flex-column align-items-center justify-content-center"},[n("img",{attrs:{src:r("666f"),alt:"loading...",width:"156",height:"156"}}),n("strong",{staticClass:"mt-4"},[e._v("Сервер не отвечает")]),n("span",{staticClass:"mb-4"},[e._v("Возможно, прилег поспать")]),n("b-button",{attrs:{variant:"dark",to:{name:"start"}}},[e._v("Попровать еще раз")])],1)])},ye=[],ke={name:"Sleep",components:{},methods:{}},je=ke,Pe=Object(p["a"])(je,xe,ye,!1,null,null,null),Ce=Pe.exports;n["default"].use(x["a"]);var Ee,Me=new x["a"]({base:"/",routes:[{path:"/",name:"start",component:A,meta:{navbar:!1}},{path:"/home",name:"home",component:Q},{path:"/cart",name:"cart",component:le,meta:{title:"Корзина"}},{path:"/orders",name:"orders",component:ve,meta:{title:"История заказов"}},{path:"/profile",name:"profile",component:we,meta:{title:"Профиль"}},{path:"/sleep",name:"sleep",component:Ce,meta:{navbar:!1}}]}),Re=r("bd86"),Te="ADD_MEAL",$e="REMOVE_MEAL",Ae="RESET_CARD",De="SET_PROMOCODE",Se="SET_ORDER_ACTIVE",ze="SET_ORDERS",He="SET_PROFILE",Ie={orderMeals:[],orders:[],promocode:null,isActive:!1},Le={orderMeals:function(e){return e.orderMeals},orderMealsCount:function(e){return e.orderMeals.length},orders:function(e){return e.orders},promocode:function(e){return e.promocode},isActiveOrder:function(e){return e.isActive}},qe={getOrders:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,M.getOrders();case 4:n=e.sent,a=n.reverse(),r(ze,a),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),r(ze,null);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function t(t){return e.apply(this,arguments)}return t}()},Ve=(Ee={},Object(Re["a"])(Ee,Te,function(e,t){e.orderMeals.push(t)}),Object(Re["a"])(Ee,$e,function(e,t){e.orderMeals=e.orderMeals.filter(function(e){return e.id!==t.id})}),Object(Re["a"])(Ee,Ae,function(e){e.orderMeals=[]}),Object(Re["a"])(Ee,De,function(e,t){e.promocode={name:t.name,discount:t.discount}}),Object(Re["a"])(Ee,Se,function(e,t){e.isActive=t}),Object(Re["a"])(Ee,ze,function(e,t){e.orders=t}),Ee),Be={state:Ie,getters:Le,actions:qe,mutations:Ve},Ne={profile:{}},Fe={profile:function(e){return e.profile}},Ge={getProfile:function(){var e=Object(j["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,M.getProfile();case 4:n=e.sent,r(He,n),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),r(He,null);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));function t(t){return e.apply(this,arguments)}return t}()},We=Object(Re["a"])({},He,function(e,t){e.profile=t}),Je={state:Ne,getters:Fe,actions:Ge,mutations:We};n["default"].use(l["a"]);var Ue=new l["a"].Store({modules:{order:Be,profile:Je},strict:!0});r("f843");n["default"].config.productionTip=!1,n["default"].use(O.a),n["default"].use(w),new n["default"]({router:Me,store:Ue,beforeCreate:function(){if(!localStorage.getItem("apiIp")){var e=prompt("Введите IP сервера","http://kosmose.online:8000/");null!=e?localStorage.setItem("apiIp",e):alert("Это обязательно!")}},render:function(e){return e(g)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("5e27"),a=r.n(n);a.a},"5e27":function(e,t,r){},"666f":function(e,t,r){e.exports=r.p+"img/sleep.6336c3fc.svg"},"76a4":function(e,t,r){e.exports=r.p+"img/add.d523e191.svg"},"95dc":function(e,t,r){e.exports=r.p+"img/profile.36607019.svg"},bdb17:function(e,t,r){e.exports=r.p+"img/forward.97aa2a33.svg"},daca:function(e,t,r){e.exports=r.p+"img/cart.ebabb289.svg"},f843:function(e,t,r){}});
//# sourceMappingURL=app.5baab9e8.js.map